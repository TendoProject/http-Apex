"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CString = void 0;
const app = require("..");
class CString extends app.api.Adapter {
    constructor(offset, interval, size) {
        super(new app.api.EntityMember(offset, interval, size));
    }
    get value() {
        let result = '';
        iterateBytes(this.source.buffer, x => result += x);
        return result;
    }
    toString() {
        return this.value.toString();
    }
}
exports.CString = CString;
function iterateBytes(buffer, add) {
    for (let i = 0; i < buffer.byteLength; i++) {
        const charCode = buffer.getUint8(i);
        if (charCode === 0)
            break;
        add(String.fromCharCode(charCode));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ1N0cmluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9saWIvY29yZS90eXBlcy9DU3RyaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDBCQUEwQjtBQUUxQixNQUFhLE9BQVEsU0FBUSxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQTZCO0lBQ2hFLFlBQVksTUFBYyxFQUFFLFFBQWdCLEVBQUUsSUFBWTtRQUN4RCxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELElBQUksS0FBSztRQUNQLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDL0IsQ0FBQztDQUNGO0FBZEQsMEJBY0M7QUFFRCxTQUFTLFlBQVksQ0FBQyxNQUFnQixFQUFFLEdBQTRCO0lBQ2xFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzFDLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEMsSUFBSSxRQUFRLEtBQUssQ0FBQztZQUFFLE1BQU07UUFDMUIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztLQUNwQztBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhcHAgZnJvbSAnLi4nO1xuXG5leHBvcnQgY2xhc3MgQ1N0cmluZyBleHRlbmRzIGFwcC5hcGkuQWRhcHRlcjxhcHAuYXBpLkVudGl0eU1lbWJlcj4ge1xuICBjb25zdHJ1Y3RvcihvZmZzZXQ6IG51bWJlciwgaW50ZXJ2YWw6IG51bWJlciwgc2l6ZTogbnVtYmVyKSB7XG4gICAgc3VwZXIobmV3IGFwcC5hcGkuRW50aXR5TWVtYmVyKG9mZnNldCwgaW50ZXJ2YWwsIHNpemUpKTtcbiAgfVxuXG4gIGdldCB2YWx1ZSgpIHtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgaXRlcmF0ZUJ5dGVzKHRoaXMuc291cmNlLmJ1ZmZlciwgeCA9PiByZXN1bHQgKz0geCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXRlcmF0ZUJ5dGVzKGJ1ZmZlcjogRGF0YVZpZXcsIGFkZDogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhckNvZGUgPSBidWZmZXIuZ2V0VWludDgoaSk7XG4gICAgaWYgKGNoYXJDb2RlID09PSAwKSBicmVhaztcbiAgICBhZGQoU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpO1xuICB9XG59XG4iXX0=