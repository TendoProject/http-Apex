"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Player = void 0;
const app = require("..");
class Player extends app.api.Adapter {
    constructor(address, localOrigin = new app.Vector(app.offsets.entity.localOrigin), glowEnable = new app.UInt8(app.offsets.player.glowEnable), glowThroughWalls = new app.UInt8(app.offsets.player.glowThroughWall), teamNum = new app.UInt8(app.offsets.player.iTeamNum, 1000), name = new app.UInt64(app.offsets.player.iName), lifeState = new app.UInt8(app.offsets.player.lifeState), lastVisibleTime = new app.Float32(app.offsets.entity.lastVisibleTime), vecPunchWeaponAngle = new app.Vector(app.offsets.player.vecPunchWeaponAngle), viewAngle = new app.Vector(app.offsets.player.viewAngle), bleedoutState = new app.UInt8(app.offsets.player.bleedoutState)) {
        super(new app.api.Entity(address, [localOrigin, glowEnable, glowThroughWalls, teamNum, name, lifeState, lastVisibleTime, vecPunchWeaponAngle, viewAngle, bleedoutState], { enableUpdate: true }));
        this.address = address;
        this.localOrigin = localOrigin;
        this.glowEnable = glowEnable;
        this.glowThroughWalls = glowThroughWalls;
        this.teamNum = teamNum;
        this.name = name;
        this.lifeState = lifeState;
        this.lastVisibleTime = lastVisibleTime;
        this.vecPunchWeaponAngle = vecPunchWeaponAngle;
        this.viewAngle = viewAngle;
        this.bleedoutState = bleedoutState;
    }
    get isValid() {
        return !this.lifeState.value
            && this.name.value
            && this.glowEnable.value !== 0
            && this.glowEnable.value !== 255;
    }
    createColor(otherPlayer) {
        return this.isSameTeam(otherPlayer)
            ? (this.bleedoutState.value ? '#FFFF00' : '#00FF00')
            : (this.bleedoutState.value ? '#FFA500' : '#FF0000');
    }
    isSameTeam(otherPlayer) {
        return this.teamNum.value === otherPlayer.teamNum.value;
    }
    toString() {
        return app.serialize(this);
    }
}
exports.Player = Player;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL2VudGl0aWVzL1BsYXllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwwQkFBMEI7QUFFMUIsTUFBYSxNQUFPLFNBQVEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUF1QjtJQUN6RCxZQUNXLE9BQWUsRUFDZixjQUFjLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFDNUQsYUFBYSxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQ3pELG1CQUFtQixJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQ3BFLFVBQVUsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFDMUQsT0FBTyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQy9DLFlBQVksSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUN2RCxrQkFBa0IsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUNyRSxzQkFBc0IsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEVBQzVFLFlBQVksSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUN4RCxnQkFBZ0IsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUN4RSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxtQkFBbUIsRUFBRSxTQUFTLEVBQUUsYUFBYSxDQUFDLEVBQUUsRUFBQyxZQUFZLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBWHZMLFlBQU8sR0FBUCxPQUFPLENBQVE7UUFDZixnQkFBVyxHQUFYLFdBQVcsQ0FBaUQ7UUFDNUQsZUFBVSxHQUFWLFVBQVUsQ0FBK0M7UUFDekQscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFvRDtRQUNwRSxZQUFPLEdBQVAsT0FBTyxDQUFtRDtRQUMxRCxTQUFJLEdBQUosSUFBSSxDQUEyQztRQUMvQyxjQUFTLEdBQVQsU0FBUyxDQUE4QztRQUN2RCxvQkFBZSxHQUFmLGVBQWUsQ0FBc0Q7UUFDckUsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUF5RDtRQUM1RSxjQUFTLEdBQVQsU0FBUyxDQUErQztRQUN4RCxrQkFBYSxHQUFiLGFBQWEsQ0FBa0Q7SUFFMUUsQ0FBQztJQUVELElBQUksT0FBTztRQUNULE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUs7ZUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLO2VBQ2YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEtBQUssQ0FBQztlQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssS0FBSyxHQUFHLENBQUM7SUFDckMsQ0FBQztJQUVELFdBQVcsQ0FBQyxXQUF1QjtRQUNqQyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDO1lBQ2pDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUNwRCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsVUFBVSxDQUFDLFdBQXVCO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEtBQUssV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7SUFDMUQsQ0FBQztJQUVELFFBQVE7UUFDTixPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztDQUNGO0FBcENELHdCQW9DQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGFwcCBmcm9tICcuLic7XG5cbmV4cG9ydCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBhcHAuYXBpLkFkYXB0ZXI8YXBwLmFwaS5FbnRpdHk+IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgYWRkcmVzczogYmlnaW50LFxuICAgIHJlYWRvbmx5IGxvY2FsT3JpZ2luID0gbmV3IGFwcC5WZWN0b3IoYXBwLm9mZnNldHMuZW50aXR5LmxvY2FsT3JpZ2luKSxcbiAgICByZWFkb25seSBnbG93RW5hYmxlID0gbmV3IGFwcC5VSW50OChhcHAub2Zmc2V0cy5wbGF5ZXIuZ2xvd0VuYWJsZSksXG4gICAgcmVhZG9ubHkgZ2xvd1Rocm91Z2hXYWxscyA9IG5ldyBhcHAuVUludDgoYXBwLm9mZnNldHMucGxheWVyLmdsb3dUaHJvdWdoV2FsbCksXG4gICAgcmVhZG9ubHkgdGVhbU51bSA9IG5ldyBhcHAuVUludDgoYXBwLm9mZnNldHMucGxheWVyLmlUZWFtTnVtLCAxMDAwKSxcbiAgICByZWFkb25seSBuYW1lID0gbmV3IGFwcC5VSW50NjQoYXBwLm9mZnNldHMucGxheWVyLmlOYW1lKSxcbiAgICByZWFkb25seSBsaWZlU3RhdGUgPSBuZXcgYXBwLlVJbnQ4KGFwcC5vZmZzZXRzLnBsYXllci5saWZlU3RhdGUpLFxuICAgIHJlYWRvbmx5IGxhc3RWaXNpYmxlVGltZSA9IG5ldyBhcHAuRmxvYXQzMihhcHAub2Zmc2V0cy5lbnRpdHkubGFzdFZpc2libGVUaW1lKSxcbiAgICByZWFkb25seSB2ZWNQdW5jaFdlYXBvbkFuZ2xlID0gbmV3IGFwcC5WZWN0b3IoYXBwLm9mZnNldHMucGxheWVyLnZlY1B1bmNoV2VhcG9uQW5nbGUpLFxuICAgIHJlYWRvbmx5IHZpZXdBbmdsZSA9IG5ldyBhcHAuVmVjdG9yKGFwcC5vZmZzZXRzLnBsYXllci52aWV3QW5nbGUpLFxuICAgIHJlYWRvbmx5IGJsZWVkb3V0U3RhdGUgPSBuZXcgYXBwLlVJbnQ4KGFwcC5vZmZzZXRzLnBsYXllci5ibGVlZG91dFN0YXRlKSkge1xuICAgIHN1cGVyKG5ldyBhcHAuYXBpLkVudGl0eShhZGRyZXNzLCBbbG9jYWxPcmlnaW4sIGdsb3dFbmFibGUsIGdsb3dUaHJvdWdoV2FsbHMsIHRlYW1OdW0sIG5hbWUsIGxpZmVTdGF0ZSwgbGFzdFZpc2libGVUaW1lLCB2ZWNQdW5jaFdlYXBvbkFuZ2xlLCB2aWV3QW5nbGUsIGJsZWVkb3V0U3RhdGVdLCB7ZW5hYmxlVXBkYXRlOiB0cnVlfSkpO1xuICB9XG4gIFxuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gIXRoaXMubGlmZVN0YXRlLnZhbHVlXG4gICAgICAmJiB0aGlzLm5hbWUudmFsdWVcbiAgICAgICYmIHRoaXMuZ2xvd0VuYWJsZS52YWx1ZSAhPT0gMFxuICAgICAgJiYgdGhpcy5nbG93RW5hYmxlLnZhbHVlICE9PSAyNTU7XG4gIH1cblxuICBjcmVhdGVDb2xvcihvdGhlclBsYXllcjogYXBwLlBsYXllcikge1xuICAgIHJldHVybiB0aGlzLmlzU2FtZVRlYW0ob3RoZXJQbGF5ZXIpXG4gICAgICA/ICh0aGlzLmJsZWVkb3V0U3RhdGUudmFsdWUgPyAnI0ZGRkYwMCcgOiAnIzAwRkYwMCcpXG4gICAgICA6ICh0aGlzLmJsZWVkb3V0U3RhdGUudmFsdWUgPyAnI0ZGQTUwMCcgOiAnI0ZGMDAwMCcpO1xuICB9XG5cbiAgaXNTYW1lVGVhbShvdGhlclBsYXllcjogYXBwLlBsYXllcikge1xuICAgIHJldHVybiB0aGlzLnRlYW1OdW0udmFsdWUgPT09IG90aGVyUGxheWVyLnRlYW1OdW0udmFsdWU7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYXBwLnNlcmlhbGl6ZSh0aGlzKTtcbiAgfVxufVxuIl19