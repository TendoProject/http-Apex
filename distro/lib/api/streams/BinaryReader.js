"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BinaryReader = void 0;
class BinaryReader {
    constructor(buffer) {
        this.buffer = new DataView(buffer);
        this.offset = 0;
    }
    hasBytes() {
        return this.offset < this.buffer.byteLength - this.buffer.byteOffset;
    }
    readBytes(size) {
        const result = new DataView(this.buffer.buffer, this.offset, size);
        this.offset += size;
        return result;
    }
    readUInt8() {
        const result = this.buffer.getUint8(this.offset);
        this.offset += 1;
        return result;
    }
    readUInt64() {
        const result = this.buffer.getBigUint64(this.offset, true);
        this.offset += 8;
        return result;
    }
    readVariableLength() {
        var more = true;
        var value = 0;
        var shift = 0;
        while (more) {
            var b = this.readUInt8();
            more = (b & 0x80) !== 0;
            value |= (b & 0x7F) << shift;
            shift += 7;
        }
        return value;
    }
}
exports.BinaryReader = BinaryReader;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmluYXJ5UmVhZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9hcGkvc3RyZWFtcy9CaW5hcnlSZWFkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsTUFBYSxZQUFZO0lBSXZCLFlBQVksTUFBbUI7UUFDN0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUNsQixDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8sSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztJQUN2RSxDQUFDO0lBRUQsU0FBUyxDQUFDLElBQVk7UUFDcEIsTUFBTSxNQUFNLEdBQUcsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQztRQUNwQixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsU0FBUztRQUNQLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQztRQUNqQixPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsVUFBVTtRQUNSLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7UUFDakIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELGtCQUFrQjtRQUNoQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsT0FBTyxJQUFJLEVBQUU7WUFDWCxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDekIsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN4QixLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDO1lBQzdCLEtBQUssSUFBSSxDQUFDLENBQUM7U0FDWjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQUNGO0FBM0NELG9DQTJDQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBCaW5hcnlSZWFkZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IGJ1ZmZlcjogRGF0YVZpZXc7XG4gIHByaXZhdGUgb2Zmc2V0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoYnVmZmVyOiBBcnJheUJ1ZmZlcikge1xuICAgIHRoaXMuYnVmZmVyID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgdGhpcy5vZmZzZXQgPSAwO1xuICB9XG5cbiAgaGFzQnl0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMub2Zmc2V0IDwgdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCAtIHRoaXMuYnVmZmVyLmJ5dGVPZmZzZXQ7XG4gIH1cblxuICByZWFkQnl0ZXMoc2l6ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLmJ1ZmZlciwgdGhpcy5vZmZzZXQsIHNpemUpO1xuICAgIHRoaXMub2Zmc2V0ICs9IHNpemU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBcbiAgcmVhZFVJbnQ4KCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYnVmZmVyLmdldFVpbnQ4KHRoaXMub2Zmc2V0KTtcbiAgICB0aGlzLm9mZnNldCArPSAxO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICByZWFkVUludDY0KCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYnVmZmVyLmdldEJpZ1VpbnQ2NCh0aGlzLm9mZnNldCwgdHJ1ZSk7XG4gICAgdGhpcy5vZmZzZXQgKz0gODtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmVhZFZhcmlhYmxlTGVuZ3RoKCkge1xuICAgIHZhciBtb3JlID0gdHJ1ZTtcbiAgICB2YXIgdmFsdWUgPSAwO1xuICAgIHZhciBzaGlmdCA9IDA7XG4gICAgd2hpbGUgKG1vcmUpIHtcbiAgICAgIHZhciBiID0gdGhpcy5yZWFkVUludDgoKTtcbiAgICAgIG1vcmUgPSAoYiAmIDB4ODApICE9PSAwO1xuICAgICAgdmFsdWUgfD0gKGIgJiAweDdGKSA8PCBzaGlmdDtcbiAgICAgIHNoaWZ0ICs9IDc7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuIl19